# 视频排序功能说明

## 概述

KOOI Cut 支持多种智能排序方式，确保视频文件按正确的顺序合并。

## 排序方式

### ⭐ 手动排序（拖拽调整）推荐！
- **说明**：完全自定义顺序，直接拖拽文件调整位置
- **适用场景**：需要精确控制顺序
- **操作方法**：
  1. 在文件列表中，用鼠标左键按住文件项
  2. 拖动到目标位置
  3. 松开鼠标完成移动
- **优点**：
  - ✅ 所见即所得
  - ✅ 完全自定义
  - ✅ 直观易用
- **提示**：拖拽文件后会自动切换到手动排序模式

## 默认排序方式

**智能数字排序（推荐）**

默认使用智能数字排序，能正确处理文件名中的数字。

**示例：**
```
传统排序（错误）:         智能排序（正确）:
video1.mp4               video1.mp4
video10.mp4              video2.mp4
video11.mp4              video3.mp4
video2.mp4               ...
video20.mp4              video10.mp4
video3.mp4               video11.mp4
```

## 可用的排序方式

### 0. 手动排序（拖拽调整）⭐ 推荐
- **说明**：直接拖拽文件调整顺序
- **适用场景**：任何需要精确控制的情况
- **操作**：鼠标拖拽文件项即可
- **优点**：完全自定义，所见即所得

### 1. 文件名（字母）
- **说明**：按文件名字母顺序排序
- **适用场景**：文件名规范，无数字编号
- **示例**：a.mp4, b.mp4, c.mp4

### 2. 文件名（智能数字）⭐ 推荐
- **说明**：智能识别文件名中的数字进行排序
- **适用场景**：带数字编号的文件（最常见）
- **示例**：
  - `video1.mp4, video2.mp4, video10.mp4`
  - `录制-第1集.mp4, 录制-第2集.mp4, 录制-第10集.mp4`

### 3. 创建时间
- **说明**：按文件创建时间排序（最早的在前）
- **适用场景**：录制时间顺序的视频
- **优点**：反映真实录制顺序
- **注意**：文件复制会改变创建时间

### 4. 修改时间
- **说明**：按文件修改时间排序（最新的在后）
- **适用场景**：经过编辑的视频文件
- **优点**：反映最后编辑顺序

### 5. 文件大小
- **说明**：按文件大小排序（从小到大）
- **适用场景**：特殊需求（不常用）
- **注意**：通常不推荐用此方式

### 6. 视频时长
- **说明**：按视频时长排序（从短到长）
- **适用场景**：需要按时长组织视频
- **注意**：⚠️ 较慢，需要读取每个视频文件
- **不推荐用于大量文件**

## 排序顺序

### 升序（默认）
- 数字：1 → 10
- 字母：A → Z
- 时间：早 → 晚
- 大小：小 → 大

### 降序
- 数字：10 → 1
- 字母：Z → A
- 时间：晚 → 早
- 大小：大 → 小

在设置中勾选"降序"即可反向排序。

## 使用方法

### 方法1：在设置中配置（推荐）

1. 点击右上角"设置"按钮
2. 在"高级设置"部分找到"排序方式"
3. 选择排序方法（默认：智能数字）
4. 勾选"降序"（如需）
5. 点击"确定"保存

### 方法2：重新排序

添加文件后，如果需要更改排序：

1. 修改设置中的排序方式
2. 点击"重新排序"按钮
3. 文件列表会立即更新

## 排序依据对照表

| 排序方式 | 依据 | 速度 | 推荐度 |
|---------|------|------|-------|
| 手动排序 | 拖拽位置 | ⚡ 即时 | ⭐⭐⭐⭐⭐ |
| 文件名（字母） | 文件名字符串 | ⚡ 很快 | ⭐⭐ |
| 文件名（智能数字）| 文件名+数字识别 | ⚡ 很快 | ⭐⭐⭐⭐⭐ |
| 创建时间 | 文件系统创建时间戳 | ⚡ 快 | ⭐⭐⭐⭐ |
| 修改时间 | 文件系统修改时间戳 | ⚡ 快 | ⭐⭐⭐ |
| 文件大小 | 文件字节数 | ⚡ 快 | ⭐ |
| 视频时长 | 视频元数据 | 🐌 慢 | ⭐⭐ |

## 最佳实践

### 需要精确控制顺序
**推荐**：手动拖拽排序 ⭐⭐⭐⭐⭐
- 直接拖拽调整
- 所见即所得
- 最直观

### 录制视频（OBS等）
**推荐**：创建时间排序
- 原因：自动按录制顺序排列
- 文件名可能不规范

### 手动命名的视频
**推荐**：智能数字排序
- 原因：正确处理编号
- 如：第1集、第2集、第10集

### 从网络下载的视频
**推荐**：修改时间排序 或 智能数字排序
- 检查文件名是否有编号
- 创建时间可能不准确

### 混合来源的视频
**推荐**：手动重命名 + 智能数字排序
1. 将所有视频重命名为：`001.mp4`, `002.mp4`, `003.mp4` ...
2. 使用智能数字排序
3. 确保顺序正确

## 技术细节

### 智能数字排序算法

```python
# 自动识别文件名中的数字
"video1.mp4"  → ["video", 1, ".mp4"]
"video10.mp4" → ["video", 10, ".mp4"]

# 按数字大小比较，而非字符串
1 < 10  (正确)
而非 "1" > "10" (字符串比较，错误)
```

### 性能说明

- **文件名排序**：O(n log n)，处理1000个文件 < 1秒
- **时间/大小排序**：O(n log n)，额外读取文件元数据
- **视频时长排序**：O(n log n)，需要打开每个视频文件 ⚠️ 慢

## 常见问题

### Q: 如何手动调整顺序？
A: 直接用鼠标拖拽文件项到目标位置即可！拖拽后会自动切换到手动排序模式。

### Q: 为什么文件顺序不对？
A: 检查排序方式是否正确，尝试使用"智能数字排序"。

### Q: 按创建时间排序不正确？
A: 文件复制会改变创建时间，尝试使用"修改时间"或重命名文件使用"智能数字排序"。

### Q: 如何强制指定顺序？
A:
- **方法1（推荐）**：直接拖拽调整顺序
- **方法2**：手动重命名文件为 `001.mp4`, `002.mp4`, `003.mp4` 等，使用智能数字排序

### Q: 排序后如何确认顺序正确？
A:
- 查看主界面的文件列表，从上到下就是合并顺序
- 可以直接拖拽调整
- 或点击"重新排序"按钮应用设置中的排序方式

### Q: 拖拽排序后能否恢复自动排序？
A: 可以！在设置中选择其他排序方式（如"智能数字"），然后点击"重新排序"按钮。

## 示例场景

### 场景1：OBS录制的多段视频
```
文件名：
2025-11-12 18-32-33.mp4
2025-11-12 19-15-20.mp4
2025-11-12 20-08-45.mp4

推荐：创建时间排序 或 文件名（智能数字）
```

### 场景2：手动命名的教程视频
```
文件名：
教程第1讲.mp4
教程第2讲.mp4
教程第10讲.mp4
教程第11讲.mp4

推荐：智能数字排序 ⭐
```

### 场景3：下载的剧集
```
文件名：
EP01.mp4
EP02.mp4
EP10.mp4

推荐：智能数字排序 或 文件名（字母）
```

## 总结

对于大多数用户：
- **首选**：**手动拖拽排序** - 最直观，完全自定义 ⭐⭐⭐⭐⭐
- **备选**：**智能数字排序** - 自动处理各种文件命名 ⭐⭐⭐⭐⭐
- **特殊情况**：根据文件来源选择创建时间或修改时间排序

**操作提示**：
1. 添加文件后，可直接拖拽调整顺序
2. 或在设置中选择自动排序方式
3. 点击"重新排序"应用新的排序规则
